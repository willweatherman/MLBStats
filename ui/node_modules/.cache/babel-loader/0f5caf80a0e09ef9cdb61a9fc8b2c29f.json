{"ast":null,"code":"import store from './store.js';\n\nfunction range(start, end) {\n  if (start === end) return [start];\n  return [start, ...range(start + 1, end)];\n}\n\nexport async function getAllTeams() {\n  await store.dispatch({\n    type: \"CLEAR_MLB_STATS\"\n  });\n  return fetch('/Teams').then(response => {\n    return response.json();\n  }).then(data => {\n    const arr = range(0, parseInt(data.page.totalPages));\n    return Promise.all(arr.map(pageNum => {\n      getTeam(pageNum);\n    }));\n  });\n}\n\nasync function getTeam(pagenum = 0) {\n  return fetch('/Teams?page=' + pagenum).then(response => {\n    return response.json();\n  }).then(data => {\n    return store.dispatch({\n      type: \"ADD_MLB_STATS\",\n      state: data._embedded\n    });\n  });\n}\n\nexport async function postTeam(json) {\n  console.log(json);\n  await fetch(\"/Teams\", {\n    method: \"POST\",\n    body: JSON.stringify(json),\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    }\n  });\n  getAllTeams();\n}\nexport async function deleteTeam(link) {\n  await fetch(link, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    }\n  });\n}","map":{"version":3,"sources":["/Users/willweatherman/gs-accessing-mongodb-data-rest/ui/src/api.js"],"names":["store","range","start","end","getAllTeams","dispatch","type","fetch","then","response","json","data","arr","parseInt","page","totalPages","Promise","all","map","pageNum","getTeam","pagenum","state","_embedded","postTeam","console","log","method","body","JSON","stringify","headers","deleteTeam","link"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,YAAlB;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsBC,GAAtB,EAA2B;AACvB,MAAGD,KAAK,KAAKC,GAAb,EAAkB,OAAO,CAACD,KAAD,CAAP;AAClB,SAAO,CAACA,KAAD,EAAQ,GAAGD,KAAK,CAACC,KAAK,GAAG,CAAT,EAAYC,GAAZ,CAAhB,CAAP;AACH;;AAED,OAAO,eAAeC,WAAf,GAA6B;AAChC,QAAMJ,KAAK,CAACK,QAAN,CAAe;AAACC,IAAAA,IAAI,EAAE;AAAP,GAAf,CAAN;AACA,SAAOC,KAAK,CAAC,QAAD,CAAL,CAAgBC,IAAhB,CAAsBC,QAAD,IAAc;AACtC,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,GAFM,EAEJF,IAFI,CAEEG,IAAD,IAAU;AACd,UAAMC,GAAG,GAAGX,KAAK,CAAC,CAAD,EAAIY,QAAQ,CAACF,IAAI,CAACG,IAAL,CAAUC,UAAX,CAAZ,CAAjB;AACA,WAAOC,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,GAAJ,CAAQC,OAAO,IAAI;AAClCC,MAAAA,OAAO,CAACD,OAAD,CAAP;AACH,KAFkB,CAAZ,CAAP;AAGH,GAPM,CAAP;AAQH;;AAED,eAAeC,OAAf,CAAuBC,OAAO,GAAG,CAAjC,EAAoC;AAChC,SAAOd,KAAK,CAAC,iBAAgBc,OAAjB,CAAL,CAA+Bb,IAA/B,CAAqCC,QAAD,IAAc;AACrD,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,GAFM,EAEJF,IAFI,CAEEG,IAAD,IAAU;AACd,WAAOX,KAAK,CAACK,QAAN,CAAe;AAACC,MAAAA,IAAI,EAAE,eAAP;AAAwBgB,MAAAA,KAAK,EAAEX,IAAI,CAACY;AAApC,KAAf,CAAP;AACH,GAJM,CAAP;AAKH;;AACD,OAAO,eAAeC,QAAf,CAAwBd,IAAxB,EAA8B;AACjCe,EAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ;AACA,QAAMH,KAAK,CAAC,QAAD,EAAW;AAClBoB,IAAAA,MAAM,EAAE,MADU;AAElBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAepB,IAAf,CAFY;AAGlBqB,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AAHS,GAAX,CAAX;AAOA3B,EAAAA,WAAW;AACd;AACD,OAAO,eAAe4B,UAAf,CAA0BC,IAA1B,EAAgC;AACnC,QAAM1B,KAAK,CAAC0B,IAAD,EAAO;AACdN,IAAAA,MAAM,EAAE,QADM;AAEdI,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AAFK,GAAP,CAAX;AAMH","sourcesContent":["import store from './store.js'\n\nfunction range(start, end) {\n    if(start === end) return [start];\n    return [start, ...range(start + 1, end)];\n}\n\nexport async function getAllTeams() {\n    await store.dispatch({type: \"CLEAR_MLB_STATS\"})\n    return fetch('/Teams').then((response) => {\n        return response.json();\n    }).then((data) => {\n        const arr = range(0, parseInt(data.page.totalPages))\n        return Promise.all(arr.map(pageNum => {\n            getTeam(pageNum)\n        }))\n    })\n}\n\nasync function getTeam(pagenum = 0) {\n    return fetch('/Teams?page='+ pagenum).then((response) => {\n        return response.json();\n    }).then((data) => {\n        return store.dispatch({type: \"ADD_MLB_STATS\", state: data._embedded})\n    })\n}\nexport async function postTeam(json) {\n    console.log(json)\n    await fetch(\"/Teams\", {\n        method: \"POST\",\n        body: JSON.stringify(json),\n        headers: {\n            \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n    });\n    getAllTeams()\n}\nexport async function deleteTeam(link) {\n    await fetch(link, {\n        method: \"DELETE\",\n        headers: {\n            \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n    })\n}\n\n\n"]},"metadata":{},"sourceType":"module"}