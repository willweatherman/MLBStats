{"ast":null,"code":"import _regeneratorRuntime from\"/Users/willweatherman/gs-accessing-mongodb-data-rest/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/willweatherman/gs-accessing-mongodb-data-rest/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/willweatherman/gs-accessing-mongodb-data-rest/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import store from'./store.js';function range(start,end){if(start===end)return[start];return[start].concat(_toConsumableArray(range(start+1,end)));}export function getAllTeams(){return _getAllTeams.apply(this,arguments);}function _getAllTeams(){_getAllTeams=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return store.dispatch({type:\"CLEAR_MLB_STATS\"});case 2:return _context.abrupt(\"return\",fetch('/Teams').then(function(response){return response.json();}).then(function(data){var arr=range(0,parseInt(data.page.totalPages));return Promise.all(arr.map(function(pageNum){return getTeam(pageNum);}));}));case 3:case\"end\":return _context.stop();}}},_callee);}));return _getAllTeams.apply(this,arguments);}function getTeam(){return _getTeam.apply(this,arguments);}function _getTeam(){_getTeam=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var pagenum,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:pagenum=_args2.length>0&&_args2[0]!==undefined?_args2[0]:0;return _context2.abrupt(\"return\",fetch('/Teams?page='+pagenum).then(function(response){return response.json();}).then(function(data){return store.dispatch({type:\"ADD_MLB_STATS\",state:data._embedded});}));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getTeam.apply(this,arguments);}export function postTeam(_x){return _postTeam.apply(this,arguments);}function _postTeam(){_postTeam=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(json){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(json);_context3.next=3;return fetch(\"/Teams\",{method:\"POST\",body:JSON.stringify(json),headers:{\"Content-type\":\"application/json; charset=UTF-8\"}});case 3:getAllTeams();case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _postTeam.apply(this,arguments);}export function deleteTeam(_x2){return _deleteTeam.apply(this,arguments);}function _deleteTeam(){_deleteTeam=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(link){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(link,{method:\"DELETE\",headers:{\"Content-type\":\"application/json; charset=UTF-8\"}});case 2:getAllTeams();case 3:case\"end\":return _context4.stop();}}},_callee4);}));return _deleteTeam.apply(this,arguments);}","map":{"version":3,"sources":["/Users/willweatherman/gs-accessing-mongodb-data-rest/ui/src/api.js"],"names":["store","range","start","end","getAllTeams","dispatch","type","fetch","then","response","json","data","arr","parseInt","page","totalPages","Promise","all","map","pageNum","getTeam","pagenum","state","_embedded","postTeam","console","log","method","body","JSON","stringify","headers","deleteTeam","link"],"mappings":"+gBAAA,MAAOA,CAAAA,KAAP,KAAkB,YAAlB,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsBC,GAAtB,CAA2B,CACvB,GAAGD,KAAK,GAAKC,GAAb,CAAkB,MAAO,CAACD,KAAD,CAAP,CAClB,OAAQA,KAAR,4BAAkBD,KAAK,CAACC,KAAK,CAAG,CAAT,CAAYC,GAAZ,CAAvB,GACH,CAED,eAAsBC,CAAAA,WAAtB,8C,6FAAO,yJACGJ,CAAAA,KAAK,CAACK,QAAN,CAAe,CAACC,IAAI,CAAE,iBAAP,CAAf,CADH,wCAEIC,KAAK,CAAC,QAAD,CAAL,CAAgBC,IAAhB,CAAqB,SAACC,QAAD,CAAc,CACtC,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAFM,EAEJF,IAFI,CAEC,SAACG,IAAD,CAAU,CACd,GAAMC,CAAAA,GAAG,CAAGX,KAAK,CAAC,CAAD,CAAIY,QAAQ,CAACF,IAAI,CAACG,IAAL,CAAUC,UAAX,CAAZ,CAAjB,CACA,MAAOC,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,GAAJ,CAAQ,SAAAC,OAAO,CAAI,CAClC,MAAOC,CAAAA,OAAO,CAACD,OAAD,CAAd,CACH,CAFkB,CAAZ,CAAP,CAGH,CAPM,CAFJ,wD,sDAYQC,CAAAA,O,+HAAf,qKAAuBC,OAAvB,kDAAiC,CAAjC,kCACWd,KAAK,CAAC,eAAgBc,OAAjB,CAAL,CAA+Bb,IAA/B,CAAoC,SAACC,QAAD,CAAc,CACrD,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAFM,EAEJF,IAFI,CAEC,SAACG,IAAD,CAAU,CACd,MAAOX,CAAAA,KAAK,CAACK,QAAN,CAAe,CAACC,IAAI,CAAE,eAAP,CAAwBgB,KAAK,CAAEX,IAAI,CAACY,SAApC,CAAf,CAAP,CACH,CAJM,CADX,0D,0CAOA,eAAsBC,CAAAA,QAAtB,6C,uFAAO,kBAAwBd,IAAxB,sHACHe,OAAO,CAACC,GAAR,CAAYhB,IAAZ,EADG,uBAEGH,CAAAA,KAAK,CAAC,QAAD,CAAW,CAClBoB,MAAM,CAAE,MADU,CAElBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAepB,IAAf,CAFY,CAGlBqB,OAAO,CAAE,CACL,eAAgB,iCADX,CAHS,CAAX,CAFR,QASH3B,WAAW,GATR,wD,2CAWP,eAAsB4B,CAAAA,UAAtB,gD,2FAAO,kBAA0BC,IAA1B,6IACG1B,CAAAA,KAAK,CAAC0B,IAAD,CAAO,CACdN,MAAM,CAAE,QADM,CAEdI,OAAO,CAAE,CACL,eAAgB,iCADX,CAFK,CAAP,CADR,QAOH3B,WAAW,GAPR,wD","sourcesContent":["import store from './store.js'\n\nfunction range(start, end) {\n    if(start === end) return [start];\n    return [start, ...range(start + 1, end)];\n}\n\nexport async function getAllTeams() {\n    await store.dispatch({type: \"CLEAR_MLB_STATS\"})\n    return fetch('/Teams').then((response) => {\n        return response.json();\n    }).then((data) => {\n        const arr = range(0, parseInt(data.page.totalPages))\n        return Promise.all(arr.map(pageNum => {\n            return getTeam(pageNum)\n        }))\n    })\n}\n\nasync function getTeam(pagenum = 0) {\n    return fetch('/Teams?page='+ pagenum).then((response) => {\n        return response.json();\n    }).then((data) => {\n        return store.dispatch({type: \"ADD_MLB_STATS\", state: data._embedded})\n    })\n}\nexport async function postTeam(json) {\n    console.log(json)\n    await fetch(\"/Teams\", {\n        method: \"POST\",\n        body: JSON.stringify(json),\n        headers: {\n            \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n    });\n    getAllTeams()\n}\nexport async function deleteTeam(link) {\n    await fetch(link, {\n        method: \"DELETE\",\n        headers: {\n            \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n    })\n    getAllTeams()\n}\n\n\n"]},"metadata":{},"sourceType":"module"}